//# https://httpyac.github.io/guide/examples para mayor información y documentación
@HOST = http://localhost:5001/api
###
# @name usuarios
# @description get json content of users
//# @note Are you sure?
# @verbose
GET {{HOST}}/users HTTP/1.1

//>> ./usuarios.json

{{
  // post request script
  exports.header = response.headers['content-type'];
  console.log(exports.header)
}}
###

POST {{HOST}}/users HTTP/1.1
Content-Type: application/json

{
  "username" : "usertest2",
  "password" : "password"
}
###

POST {{HOST}}/users/register HTTP/1.1
Content-Type: application/json

{
  "name": "Ernesto",
  "lastname": "Mendoza Rojas",
  "username" : "user_test2",
  "password" : "password",
  "isAdmin" : true
}
###
POST {{HOST}}/users/register HTTP/1.1
Content-Type: application/json

{
  "username" : "user_test",
  "password" : "password",
  "isAdmin" : true
}
###
GET {{HOST}}/users
###
# @name login
//POST {{HOST}}/login
POST http://localhost:5001/login
{
  "username": "wilder00",
  "password": "password"
}

{{
  // post request script
  exports.authorization = response.headers['authorization'];
}}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ3aWxkZXIwMCIsImF1dGhvcml0aWVzIjoiW3tcImF1dGhvcml0eVwiOlwiUk9MRV9BRE1JTlwifSx7XCJhdXRob3JpdHlcIjpcIlJPTEVfVVNFUlwifV0iLCJ1c2VybmFtZSI6IndpbGRlcjAwIiwiZXhwIjoxNzA2ODQ5MTg4LCJpYXQiOjE3MDY4NDU1ODh9.P1j3HUvoIftp12hh-o9CaJBtyKsbJjmV82xvxXyq998
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
content-length: 353
date: Fri, 02 Feb 2024 03:46:28 GMT
connection: close
###
# @name loginRoleUser
//POST {{HOST}}/login
POST http://localhost:5001/login
{
  "username": "user_test",
  "password": "password"
}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
content-length: 317
date: Sat, 03 Feb 2024 01:36:43 GMT
connection: close
###
# @ref login
GET {{HOST}}/products
Authorization:{{authorization}}
###
#GET {{HOST}}/users
GET http://localhost:5001/api/users
//Authorization:{{authorization}}
###
# @forceRef login
GET {{HOST}}/file-items
Authorization:Bearer {{login.token}}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
transfer-encoding: chunked
date: Sun, 04 Feb 2024 14:00:14 GMT
connection: close
###
# @forceRef loginRoleUser
GET {{HOST}}/folders
Authorization:Bearer {{loginRoleUser.token}}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
transfer-encoding: chunked
date: Sat, 03 Feb 2024 01:51:23 GMT
connection: close
###
# @forceRef login
POST {{HOST}}/file-items
Authorization:Bearer {{login.token}}
Content-Type: multipart/form-data; boundary=WebKitFormBoundary

--WebKitFormBoundary
Content-Disposition: form-data; name="name"

Wilder-Trujillo-cv
--WebKitFormBoundary
Content-Disposition: form-data; name="title"

invoice_title
--WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="Wilder-Trujillo-cv.pdf"
Content-Type: application/pdf

< ./try-file/Wilder-Trujillo-cv.pdf
--WebKitFormBoundary--

HTTP/1.1 201  - Created
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
transfer-encoding: chunked
date: Sun, 04 Feb 2024 04:43:08 GMT
connection: close
###
# @forceRef login
GET {{HOST}}/folders/4/files
Authorization:Bearer {{login.token}}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
transfer-encoding: chunked
date: Sun, 04 Feb 2024 22:06:29 GMT
connection: close
###
# @forceRef login
GET {{HOST}}/folders/4
Authorization:Bearer {{login.token}}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
transfer-encoding: chunked
date: Sun, 04 Feb 2024 22:06:16 GMT
connection: close